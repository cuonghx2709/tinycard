<div class="container" id="question">
    <div class="row">
        <div class="col-12 col-md-12 wrapper mt-md-5 mb-5 bg-white" style="height: 100vh;">
            <div class="row">
            </div>
            <div class="row">
                <div class="title col-8 col-md-3 mx-auto mt-5 text-center text-warning h4 font-weight-bold">New Card</div>
            </div>
            <div class="row">
                <div id="card" class="col-8 col-md-3 mx-auto mt-4 rounded pointer pl-0 pr-0" style="height: 300px;">
                    <div class="front">
                        <img alt="The Sun" class="rounded w-100 h-100" style="" id="imgPath">
                    </div>
                    <div class="back text-center text-white font-weight-bold h4 bg-warning rounded pt-5">
                        <div class="w-100 pt-2"></div>
                        <span class="align-middel pt-5 d-block" id="title"></span>
                    </div>
                </div>
            </div>
            <div class="row d-none" id="btn-continue">
                <div class="continue col-8 col-md-3 mx-auto mt-4 pt-1">
                    <button class="w-100 bg-primary text-white text-uppercase font-weight-bold rounded pt-2 pb-2 pointer">Continue</button>
                </div>
            </div>
            <div class="row" id="flip">
                <div class="how-to-flip col-8 col-md-3 mx-auto mt-5 mt-md-3 text-center text-secondary font-weight-bold h4">
                    Click card to flip
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container d-none" id="answer">
    <div class="row">
        <div class="col-12 col-md-12 wrapper mt-md-5 mb-5 bg-white pt-5" style="height: 100vh;">
            <div class="row">
            </div>
            <div class="row">
                <div class="card col-10 col-md-3 mt-5 offset-1 rounded pointer pl-0 pr-0">
                    <img height="300px" src="/image/lesson2/venus.png" alt="venus" class="rounded" id="image_answer">
                </div>
                <div class="answer col-10 col-md-4 mt-5 offset-1">
                    <div class="row">
                        <div class="col-12 answer-0 border border-primary pt-3 pb-3 rounded mt-4 text-center text-primary text-uppercase font-weight-bold pointer">The Sun</div>
                        <div class="col-12 answer-1 border border-primary pt-3 pb-3 rounded mt-5 text-center text-primary text-uppercase font-weight-bold pointer"
                            onclick=''>Venus</div>
                        <div class="col-12 answer-2 border border-primary pt-3 pb-3 rounded mt-5 text-center text-primary text-uppercase font-weight-bold pointer">Jupiter</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        let number = 0;
        $('#card').flip();

        $("#card").click(function (event) {
            $("#btn-continue").toggleClass('d-none');
            $("#flip").toggleClass('d-none');
        });
        let url = window.location.href
        $.ajax({
            url: url,
            method: "POST",
            data: {
                number: number
            },
            success: (doc) => {
                if (doc) {
                    console.log(doc)
                    $('#title').text(doc.title)
                    $('#imgPath').attr("src", doc.imgPath)
                }


            }
        });

        $('#btn-continue').on('click', () => {
            number++;
            $.ajax({
                url: url,
                method: "POST",
                data: {
                    number: number
                },
                success: (doc) => {
                    if (doc) {
                        console.log(doc)
                        $('#title').text(doc.title)
                        $('#imgPath').attr("src", doc.imgPath)
                        $("#card").flip('toggle');
                        $("#btn-continue").toggleClass('d-none');
                        $("#flip").toggleClass('d-none');
                    } else {
                        runquestion()
                    }
                }
            });

            let runquestion = () => {
                $('#answer').addClass("d-block")
                $('#answer').removeClass("d-none")
                $('#question').addClass("d-none")
                $('#question').removeClass("d-block")
                
                $.ajax({
                    url : window.location.href  + "/getdetails",
                    success : (doc) =>{
                        var numberRandom = Math.floor(Math.random() * doc.lessonContent.length)
                        var elm = doc.lessonContent[numberRandom]
                        console.log(elm)
                        $('#image_answer').attr("src", elm.imgPath)
                        numberRandom = Math.floor(Math.random() * 3)
                        $('.answer-' + numberRandom).text(elm.title)
                        $('.answer-' + numberRandom).attr("onclick", '$.playSound("/sound/CorrectSound.mp3")')
                    }
                })
            }
        })
    });
</script>